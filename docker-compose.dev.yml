services:
  chat-dev:
    image: maven:3.9-eclipse-temurin-17
    working_dir: /workspace
    # å…ˆé¢„çƒ­ä¾èµ–ï¼Œå†å¯åŠ¨ï¼›å¹¶ä¸”è·³è¿‡ test ç¼–è¯‘
    command: sh -lc "mvn -U -Dmaven.test.skip=true dependency:go-offline || true; mvn -Dmaven.test.skip=true spring-boot:run"
    volumes:
      - ./:/workspace
      - m2cache:/root/.m2         # è¿™é‡Œå¼•ç”¨ named volume
    environment:
      APP_REDIS_URL: redis://redis:6379
      APP_SOCKET_HOST: 0.0.0.0
      APP_SOCKET_PORT: 9092
      SERVER_PORT: 8080
    ports:
      - "8081:8080"
      - "9092:9092"
    depends_on: [redis]

# ğŸ‘‡ é¡¶å±‚å®šä¹‰ named volumeï¼ˆè·Ÿ services å¹³çº§ï¼‰
volumes:
  m2cache: {}
